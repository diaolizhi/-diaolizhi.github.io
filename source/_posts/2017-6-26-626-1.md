---
layout: post
title: Linux 和 python 实现贴吧水贴与自动签到
date: 2017-6-26
categories: 脚本
---

# 1、重装系统

为了不忽略任何一个步骤所以先重装系统
<!--more-->
![](\images\Linux\Reinstall.PNG)
# 2、登录 Xshell5
## 填写主机地址
![](\images\Linux\signshell.PNG)
## 填写用户名
![](\images\Linux\username.PNG)
## 填写密码
![](\images\Linux\password.PNG)
# 3、登录成功
通过 Xshell5 登录云主机之后，所在的文件夹是根目录下的 root 文件夹

![](\images\Linux\root.PNG)  
输入 python 后发现，Linux 已经装好了 python2.6，所以 python 文件必须要在2.6的环境下运行。

![](\images\Linux\python.PNG)

# 4、上传文件
已经具有 python 环境了，所以就不用安装，直接上传 py 文件即可。

![](\images\Linux\upload.PNG)

但是发现上传的时候进度条不动。

![](\images\Linux\noupload.PNG)

然后上百度找答案（毕竟翻墙麻烦）

![](\images\Linux\solve.PNG)

![](\images\Linux\lrzsz.PNG)

之后就可以上传成功了

![](\images\Linux\uploadok.PNG)

用发送QQ邮件的小程序测试一下能不能运行

![](\images\Linux\testQQSend.PNG)

![](\images\Linux\qqsendok.PNG)

测试成功，说明当前的 python 环境是没问题的。

# 5、测试签到脚本
用同样的方法上传文件，结果发现 requests 找不到，因为我们没有 requests 这个外部库

![](\images\Linux\norequests.PNG)

尝试用 pip 的方式安装 requests 库

结果发现 pip 命令也不存在

![](\images\Linux\nohavepip.PNG)

上网查找解决方法

![](\images\Linux\installpip.PNG)

安装 pip 之后再安装 requests

这是安装成功的提示

![](\images\Linux\installrequestsok.PNG)

测试一下签到脚本

![](\images\Linux\test_import_ok.PNG)

现在已经成功了，但是由于编码的问题，所以显示出来的不是中文。

# 6、定时运行程序

添加 crontab

![](\images\Linux\addcrontab.PNG)

编辑 crontab

![](\images\Linux\editorcrontab.PNG)

# 7、后台运行 python 程序

后台运行 py 文件，并将输出到文本文件中

![](\images\Linux\yiadd.PNG)

测试成功

![](\images\Linux\yiaddok.PNG)

# 8、退出

一定要用 exit 命令退出，否则后台运行的程序将会退出。

![](\images\Linux\exit.PNG)

# 9、总结

刚开始 Linux 存在 python2.6，但没有 pip，需要自己安装。想要上传文件也要安装一些东西。py 文件的具体编写没讲到，怎么才能显示中文也没有解决。

这些文件在 root 目录下，签到程序在 sign 文件夹下，add-* 文件夹存放的是自动回帖的程序，但是有一个号并不能成功回帖。